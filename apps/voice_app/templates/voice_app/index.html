<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.2.1/css/bootstrap.min.css"
        integrity="sha384-GJzZqFGwb1QTTN6wy59ffF1BuGJpLSa9DkKMp0DgiMDm4iYMj70gZWKYbI706tWS" crossorigin="anonymous">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script src="http://cdnjs.cloudflare.com/ajax/libs/modernizr/2.8.2/modernizr.js"></script>
    {% load static %}
    <link rel="stylesheet" href="{% static 'voice_app/css/style.css' %}">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/3.7.0/animate.min.css">
    <script src="{% static 'voice_app/js/scripts.js' %}"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.7.3/Chart.js"></script>
    <title>Voice App</title>
</head>

<body style="background-color: {{ request.session.color }} !important;">
    <div id="loading-wrapper" style="display: none;">
        <div class="animated infinite pulse" id="loading-text">LISTENING</div>
        <div id="loading-content"></div>
    </div>
    <div id="blur">
        <link href='https://fonts.googleapis.com/css?family=Lato:300,400,700' rel='stylesheet' type='text/css'>
        <div id='stars'></div>
        <div id='stars2'></div>
        <div id='stars3'></div>
        <!-- <div id='title'>
            <span>
                PURE CSS
            </span>
            <br>
            <span>
                PARALLAX PIXEL STARSvcbcbcbcbcb
            </span>
        </div> -->
        <div class="container">
            <div class="activityLogWrapper">
                <h3>Recent Commands:</h3>
                <div class="activityLog animated pulse">
                    {% for item in all_items %}
                    <p>&nbsp;{{ item.item }}</p>
                    {% endfor %}
                </div>
                <form action="/clearActivityLog">
                    <input type="submit" value="Clear" class="clearbtn">
                </form>
            </div>
            <div class="main-content-wrapper">

                <div class="main-content">
                    <p class="animated slideInDown" style="font-size: 40px;">{{last_phrase.content.upper}}</p>
                    <hr style="border-color: rgba(255, 255, 255, 0.39);">

                    {% if last_phrase.content == request.session.command_for_pics %}
                    <div class="container animated slideInDown">
                        {% for i in request.session.main_content %}
                        {{ i | safe }}
                        {% endfor %}
                    </div>
                    {% endif %}

                    {% if last_phrase.content == 'I love you too' %}
                        <h3>You're so loved!</h3>
                        <iframe 
                            width="760" 
                            height="515" 
                            src="https://www.youtube.com/embed/Uq734_nZ7Eo?rel=0&autoplay=1&start=13" 
                            frameborder="0" 
                            allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" 
                            allowfullscreen>
                        </iframe>
                    {% endif %}

                    {% if last_phrase.content == 'Oh look, it is richard nixon' %}
                        <p>So much Rich</p>
                        <img width="300px" height="300px" src="https://images-na.ssl-images-amazon.com/images/I/718e9Qe67RL.jpg" alt="nix1">
                        <table class="table">
                            <tbody>
                                <tr>
                                    <td><img style="width:200px; height:200px"src="https://www.washingtonpost.com/pbox.php?url=http://www.washingtonpost.com/blogs/in-the-loop/files/2013/08/nixon1-300x198.jpg&w=1484&op=resize&opt=1&filter=antialias&t=20170517" alt="nixon"></td>
                                    <td><img style="width:200px; height:200px"src="https://66.media.tumblr.com/805ed63647377f328df72ee16ee7e1ee/tumblr_ne1xwyFIsG1u12utdo1_400.jpg" alt="nixon"></td>
                                    <td><img style="width:200px; height:200px"src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcQUFaYQEs9sPI1KPoSYZpypprLtYvDF-rfjIdi3HCvs_fn1Ywj5" alt="nixon"></td>
                                </tr>
                                <tr>
                                    <td><img style="width:200px; height:200px"src="https://ocweekly.com/wp-content/uploads/2018/11/6442178_dick.jpg" alt="nixon"></td>
                                    <td><img style="width:200px; height:200px"src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcTumnSa_XY_qZIvd9gno3tYq7mVR7p4FY0XshboeD2DfyXIgZru" alt="nixon"></td>
                                    <td><img style="width:200px; height:200px"src="https://www.picclickimg.com/d/l400/pict/113615116600_/Tricky-Dick-Richard-Nixon-stoner-poster-21-x.jpg" alt="nixon"></td>
                                </tr>
                                <tr>
                                    <td><img style="width:200px; height:200px"src="https://encrypted-tbn0.gstatic.com/images?q=tbn:ANd9GcT3g2Y8mpVpX6r7Z8_ZV5B6vFLajdSmYYlNSicL6z2fRBL3n3I" alt="nixon"></td>
                                    <td><img style="width:200px; height:200px"src="https://media.mnn.com/assets/images/2010/01/intro_5.jpg.560x0_q80_crop-smart.jpg" alt="nixon"></td>
                                    <td><img style="width:200px; height:200px"src="https://law.duke.edu/sites/default/files/timeline_images/young_nixon.jpeg" alt="nixon"></td>
                                </tr>
                            </tbody>
                        </table>
                    {% endif %}

                    {% if last_phrase.content == request.session.command_for_city_scores_compare %}
                        <div>

                            <br>

                            <h3>Quality of Life Ratings for {{ request.session.city_score_info_name }}</h3>
                            <p style="display:none" id="data_for_viz_radar">{{ request.session.data_for_viz_radar }}</p>
        
                            <br>

                            <canvas 
                                id="chartjs-2" 
                                class="chartjs" 
                                width="770" 
                                height="425" 
                                style="display: block; width: 770px; height: 385px;"
                            ></canvas>
    
                            <br>
                            <br>
    
                            <i>{{ request.session.city_score_info_summary|safe }}</i>
                        </div>
                    {% endif %}

                    {% if last_phrase.content == request.session.command_for_data %}

                        <p>Air Quality Index (AQI) for major cities in this country</p>

                        <p style="display:none" id="data_for_viz">{{ request.session.chart_data_city_scores }} </p>
                        <p style="display:none" id="label_for_viz">{{ request.session.chart_data_city_names }} </p>

                        <canvas 
                            id="chartjs-1" 
                            class="chartjs" 
                            width="770" 
                            height="325" 
                            style="display: block; width: 770px; height: 385px;"
                        ></canvas>

                        <table class="table table-striped">
                                <tbody>
                                        <tr>
                                            <th><strong>Air Quality Index<br>
                                            (AQI) Values</strong></th>
                                            <th><strong>Levels of Health Concern</strong></th>
                                        </tr>
                                        <tr>
                                            <th><strong><em>When the AQI is in this range</em>:</strong></th>
                                            <th><em>.<strong>.air quality conditions are:</strong></em></th>
                                        </tr>
                                        <tr >
                                            <td>0 to 50 </td>
                                            <td> Good</td>
                                        </tr>
                                        <tr >
                                            <td>51 to 100 </td>
                                            <td>Moderate</td>
                                        </tr>
                                        <tr >
                                            <td>101 to 150 </td>
                                            <td>Unhealthy for Sensitive Groups </td>
                                        </tr>
                                        <tr >
                                            <td>151 to 200</td>
                                            <td>Unhealthy </td>
                                        </tr>
                                        <tr >
                                            <td>201 to 300</td>
                                            <td> Very Unhealthy</td>
                                        </tr>
                                            <tr>
                                            <td height="22">301 to 500</td>
                                            <td>Hazardous</td>
                                        </tr>
                                        </tbody>
                            </table>

                            <h5>What is an AQI?</h5>

                            <p>
                                The AQI is an index for reporting daily air quality. 
                                It tells you how clean or polluted your air is, and what 
                                associated health effects might be a concern for you. The AQI 
                                focuses on health effects you may experience within a few hours or 
                                days after breathing polluted air. EPA calculates the AQI for five 
                                major air pollutants regulated by the Clean Air Act: ground-level ozone, 
                                particle pollution (also known as particulate matter), carbon monoxide, 
                                sulfur dioxide, and nitrogen dioxide. For each of these pollutants, EPA has 
                                established national air quality standards to protect public health .Ground-level 
                                ozone and airborne particles are the two pollutants
                            </p>

                            <h5>How Does the AQI Work?</h5>

                            <p>
                                    Think of the AQI as a yardstick that runs from 0 to 500. The higher the 
                                    AQI value, the greater the level of air pollution and the greater the health 
                                    concern. For example, an AQI value of 50 represents good air quality with little 
                                    potential to affect public health, while an AQI value over 300 represents hazardous 
                                    air quality.

                                    An AQI value of 100 generally corresponds to the national air quality standard for 
                                    the pollutant, which is the level EPA has set to protect public health. AQI values 
                                    below 100 are generally thought of as satisfactory. When AQI values are above 100, 
                                    air quality is considered to be unhealthy-at first for certain sensitive groups of 
                                    people, then for everyone as AQI values get higher.
                            </p>

                            <a style="color:white;" href="https://airnow.gov/index.cfm?action=aqibasics.aqi">learn more...</a>

                    {% endif %}

                    {% if last_phrase.content == request.session.last_news_command %}
                        {% for article in request.session.bitcoin.articles %}
                            <p style="color: green; font-size: 28px;
                                ">{{article.title}}</p>
                            <p style="padding: 0 32px;">{{article.content}}</p>
                            <p style="padding: 0 32px;"><a href="{{article.url}}" target="_blank">{{article.url}}</a></p>
                        {% endfor %}
                    {% endif %}
                    
                    {% if last_phrase.content == request.session.command %}
                        {% if "weatherimage" in request.session %}
                            <img class="weatherimage animated fadeInUp" src="{{request.session.weatherimage}}" alt="weatherimage">
                        {% endif %}
                    {% endif %}
                </div>
                <div class="button text-center">
                    <form action="/voice">
                        <!-- <input id = "myBtn" type="submit" value="Press To Talk" class="btn btn-primary fa fa-microphone" onkeypress="submitOnEnter(this, event);" /> -->
                        <button id="micbtn" type="submit" class="micbtn"><i
                                class="fa fa-microphone animated infinite pulse slow"></i></button>
                    </form>
                </div>
            </div>

        </div>
    </div>
</body>

<script type="text/javascript">
    // function submitOnEnter(inputElement, event) {
    //     if (event.keyCode == 13) { // No need to do browser specific checks. It is always 13.
    //     print("YO!")
    //         inputElement.form.submit();
    //     }
    // }
    $(document).ready(function (e) {
        console.log("hello");
        $('body').keyup(function (e) {
            if (e.keyCode == 32) {
                $("#micbtn").click();
            }
        });
    });
</script>

</html>